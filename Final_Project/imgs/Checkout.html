<!DOCTYPE html>
<!-- saved from url=(0035)http://127.0.0.1:5500/checkout.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
                <link rel="stylesheet" href="./Checkout_files/all.min.css">

    <!-- Required meta tags -->
    
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="./Checkout_files/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <title>Checkout</title>
  </head>
  <body class="bg-light mt-5 pt-5" style="min-height: 1500px">

    <div id="navbar">




  
    
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap demo</title>
    <link href="./Checkout_files/bootstrap(1).min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <style> nav
    {background-color:#d6cbc8 !important;}</style>
  
  
    <script src="./Checkout_files/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
  <!-- Code injected by live-server -->
<script>
	// <![CDATA[  <-- For SVG support
	if ('WebSocket' in window) {
		(function () {
			function refreshCSS() {
				var sheets = [].slice.call(document.getElementsByTagName("link"));
				var head = document.getElementsByTagName("head")[0];
				for (var i = 0; i < sheets.length; ++i) {
					var elem = sheets[i];
					var parent = elem.parentElement || head;
					parent.removeChild(elem);
					var rel = elem.rel;
					if (elem.href && typeof rel != "string" || rel.length == 0 || rel.toLowerCase() == "stylesheet") {
						var url = elem.href.replace(/(&|\?)_cacheOverride=\d+/, '');
						elem.href = url + (url.indexOf('?') >= 0 ? '&' : '?') + '_cacheOverride=' + (new Date().valueOf());
					}
					parent.appendChild(elem);
				}
			}
			var protocol = window.location.protocol === 'http:' ? 'ws://' : 'wss://';
			var address = protocol + window.location.host + window.location.pathname + '/ws';
			var socket = new WebSocket(address);
			socket.onmessage = function (msg) {
				if (msg.data == 'reload') window.location.reload();
				else if (msg.data == 'refreshcss') refreshCSS();
			};
			if (sessionStorage && !sessionStorage.getItem('IsThisFirstTime_Log_From_LiveServer')) {
				console.log('Live reload enabled.');
				sessionStorage.setItem('IsThisFirstTime_Log_From_LiveServer', true);
			}
		})();
	}
	else {
		console.error('Upgrade your browser. This Browser is NOT supported WebSocket for Live-Reloading.');
	}
	// ]]>
</script>


<style>

  a{
    color: aliceblue !important;
  }


</style>



    
    <nav class="navbar  navbar-expand-lg fixed-top" id="navbar">
  <div class="container-fluid">
    <a class="navbar-brand" href="http://127.0.0.1:5500/home.html"><img src="./Checkout_files/0EB58775-DA79-49C8-8947-708A558598ED.PNG" style="height: 60px;width: 100px;"></a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
      <div class="navbar-nav ms-auto">
                <a class="nav-link active" aria-current="page" href="http://127.0.0.1:5500/home.html">Home</a>

 
                <a class="nav-link nav-link active" href="http://127.0.0.1:5500/glam.html">Products</a>
        <a class="nav-link nav-link active" href="http://127.0.0.1:5500/contact.html">Contact</a>
        <a class="nav-link nav-link active" href="http://127.0.0.1:5500/ourFaries.html">Our Fairies</a>
        <a class="nav-link nav-link active" href="http://127.0.0.1:5500/search.html">Search</a>
        <a class="nav-link nav-link active" href="http://127.0.0.1:5500/checkout.html">Checkout</a>

        <a class="nav-link nav-link active" href="http://127.0.0.1:5500/signup.html">SignUp</a>
        <a class="nav-link nav-link active" href="http://127.0.0.1:5500/signin.html">SignIn</a>


                       <a class="nav-link active" aria-current="page" href="http://127.0.0.1:5500/favorites.html">
 <i class="fa-regular fa-heart"></i>
    <span id="fav-count" class="badge bg-danger start-100 translate-middle">
      0
    </span>
  </a>


        <a class="nav-link active" aria-current="page" href="http://127.0.0.1:5500/cart.html">
           <i class="fa-solid fa-cart-shopping"></i>
    <span id="cart-count" class="badge bg-danger start-100 translate-middle">
      0
    </span>
        </a>
        
      </div>
    </div>
  </div>
</nav>
















<script>
  document.addEventListener("DOMContentLoaded", () => {
  updateCounters();
});
</script>






<!-- 
<footer class="bg-dark text-white text-center py-3">
  <p class="mb-0 small"> 2026 Freshmart Supermarket</p>
</footer>

 -->



<script src="./Checkout_files/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
    <scrip src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/js/all.min.js">
        
 
<!-- Code inject--></scrip></div>
    <div class="container text-center">
      <div class="py-5">
        <img src="./Checkout_files/bag-checkout.jpg" alt="" width="72px" height="72px">
      </div>

      <h1>Checkout</h1>
      <p class="lead">
        Lorem ipsum dolor sit amet consectetur adipisicing elit.
      </p>
    </div>

    <div class="container">
      <h4>Billing Address</h4>
      <form id="checkout-form" novalidate="">
        <div class="row g-3">
          <div class="col-sm-6">
            <label for="firstName" class="form-label">First Name</label>
            <input id="firstName" type="text" class="form-control" placeholder="Please enter your first name" required="">
            <div class="invalid-feedback">valid first name is required</div>
          </div>

          <div class="col-sm-6">
            <label for="lastName" class="form-label">Last Name</label>
            <input id="lastName" type="text" class="form-control" placeholder="Please enter your last name" required="">
            <div class="invalid-feedback">valid first name is required</div>
          </div>

          <div class="col-12">
            <label for="username" class="form-label">Username</label>
            <div class="input-group">
              <div class="span input-group-text">@</div>
              <input id="username" type="text" class="form-control is-invalid" placeholder="Please enter your username" required="">
              <div class="invalid-feedback">Username must be at least 4 characters and only letters/numbers</div>
            </div>
          </div>

          <div class="col-md-4">
            <label for="country" class="form-label">Country</label>

            <select id="country" class="form-control" placeholder="Please enter your username" required="">
              <option>Choose...</option>
              <option class="Australia">Australia</option>
              <option class="Egypt">Egypt</option>
              <option class="Morocco">Morocco</option>
              <option class="Greek">Greek</option>
              <option class="China">China</option>
            </select>

            <div class="invalid-feedback">valid username is required</div>
          </div>

          <div class="col-md-4">
            <label for="State" class="form-label">State</label>

            <select id="state" class="form-control" placeholder="Please enter your username" required="">
              <option>Choose...</option>
              <option class="Australia">WA</option>
              <option class="Egypt">SA</option>
              <option class="Morocco">Cairo</option>
              <option class="Greek">Alex</option>
              <option class="China">NT</option>
            </select>

            <div class="invalid-feedback">valid username is required</div>
          </div>

          <div class="col-md-3">
            <label for="Postcode" class="form-label">Postcode</label>
            <input id="Postcode" type="number" class="form-control" placeholder="12345" required="">
            <div class="invalid-feedback">valid username is required</div>
          </div>

          <hr class="my-4">

          <div class="col-12">
            <div class="form-check">
              <input id="sameAddress" type="checkbox" class="form-check-input">
              <label for="sameAddress" class="form-check-label">Shipping address is the same as my billing address</label>
            </div>

            <div class="form-check">
              <input id="saveInfo" type="checkbox" class="form-check-input">
              <label for="saveInfo" class="form-check-label">Save this info</label>
            </div>
            <hr class="my-4">
            <h4 class="mb-3">Payments</h4>
            <div class="form-check">
              <input id="creditCard" name="paymentMethod" type="radio" class="form-check-input" checked="" required="">
              <label for="creditCard">Credit Card</label>
            </div>
            <div class="form-check">
              <input id="directDebit" name="paymentMethod" type="radio" class="form-check-input" checked="" required="">
              <label for="directDebit">Direct Debit</label>
            </div>
            <div class="form-check">
              <input id="payPal" name="paymentMethod" type="radio" class="form-check-input" checked="" required="">
              <label for="payPal">PayPal</label>
            </div>
          </div>

          <div class="row my-3 gy-3">
            <div class="col-md-6">
              <label for="fullName" class="form-label">Full Name on Card</label>
              <input id="fullName" type="text" class="form-control" required="">
              <small class="text-muted">Full name as displayed on card</small>
              <div class="invalid-feedback">Name on card is required</div>
            </div>
            <div class="col-md-6">
              <label for="cc-number" class="form-label">Credit Card Number</label>
              <input id="cc-number" type="text" class="form-control" required="">
              <div class="invalid-feedback">Credit Card Number is required</div>
            </div>
            <div class="col-md-3">
              <label for="cc-expire" class="form-label">Expiration</label>
              <input id="cc-expire" type="text" class="form-control" required="">
              <div class="invalid-feedback">Expiration is required</div>
            </div>
            <div class="col-md-3">
              <label for="cc-cvv" class="form-label">CVV</label>
              <input id="cc-cvv" type="text" class="form-control" required="">
              <div class="invalid-feedback">CVV is required</div>
            </div>
            <hr class="my-4">
            <button class="btn btn-primary btn-lg btn-block" style="background-color: #d6cbc8;">
              Confirm checkout
            </button>
          </div>
        </div>
      </form>

    </div>
          <div id="footer-container">

  
    
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>footer</title>
    <link href="./Checkout_files/bootstrap(1).min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <link rel="stylesheet" href="./Checkout_files/bootstrap-icons.min.css">
    <style>
      .my-bg {
        background-color: #d6cbc8; /* your color */
      }
    </style>
  
  
    <footer class="my-bg text-light py-4">
      <div class="container px-4">
        <div class="row">
          <div class="col-6 col-lg-4">
            <h3 class="pt-3 fw-bold">D&amp;M</h3>
            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>
            <p>09235678798</p>
            <p class="mb-0">09878656545</p>
          </div>
          <div class="col">
            <h4 class="pt-3 fw-bold">Menu</h4>
            <ul class="list-unstyled">
              <li>
                <a href="http://127.0.0.1:5500/home.html" class="text-decoration-none text-light">Home</a>
              </li>
              <li>
                <a href="http://127.0.0.1:5500/about.html" class="text-decoration-none text-light">About</a>
              </li>
              <li>
                <a href="http://127.0.0.1:5500/ourFaries.html" class="text-decoration-none text-light">Services</a>
              </li>
              <li>
                <a href="http://127.0.0.1:5500/footer.html" class="text-decoration-none text-light">Contact</a>
              </li>
            </ul>
          </div>
          <div class="col">
            <h4 class="pt-3 fw-bold">More</h4>
            <ul class="list-unstyled">
              <li>
                <a href="http://127.0.0.1:5500/checkout.html#" class="text-decoration-none text-light">Home</a>
              </li>
              <li>
                <a href="http://127.0.0.1:5500/checkout.html#" class="text-decoration-none text-light">About</a>
              </li>
            </ul>
          </div>
          <div class="col">
            <h4>Categories</h4>
            <ul class="list-unstyled">
              <li>
                <a href="http://127.0.0.1:5500/checkout.html#" class="text-decoration-none text-light">Home</a>
              </li>
              <li>
                <a href="http://127.0.0.1:5500/checkout.html#" class="text-decoration-none text-light">About</a>
              </li>
            </ul>
          </div>
          <div class="col-6 col-lg-3 text-lg-end">
            <h4>Social Media Icons</h4>
            <div>
              <a href="http://127.0.0.1:5500/checkout.html#" class="text-decoration-none text-light"><i class="bi bi-instagram fs-2 me-3"></i></a>
              <a href="http://127.0.0.1:5500/checkout.html#" class="text-decoration-none text-light"><i class="bi bi-facebook fs-2 me-3"></i></a>
              <a href="http://127.0.0.1:5500/checkout.html#" class="text-decoration-none text-light"><i class="bi bi-pinterest fs-2 me-3"></i></a>
              <a href="http://127.0.0.1:5500/checkout.html#" class="text-decoration-none text-light"><i class="bi bi-linkedin fs-2"></i></a>
            </div>
          </div>
        </div>
        <hr>
        <div class="d-flex justify-content-between">
          <p class="text-center me-4">Â© 2026 D&amp;M. All rights reserved.</p>
          <div class="d-flex">
            <a href="http://127.0.0.1:5500/checkout.html#" class="text-decoration-none text-light me-4">Terms of use</a>
            <a href="http://127.0.0.1:5500/checkout.html#" class="text-decoration-none text-light">Privacy and Policy</a>
          </div>
        </div>
      </div>
    </footer>
    <script></script>
  <!-- Code injected by live-server -->
<script>
	// <![CDATA[  <-- For SVG support
	if ('WebSocket' in window) {
		(function () {
			function refreshCSS() {
				var sheets = [].slice.call(document.getElementsByTagName("link"));
				var head = document.getElementsByTagName("head")[0];
				for (var i = 0; i < sheets.length; ++i) {
					var elem = sheets[i];
					var parent = elem.parentElement || head;
					parent.removeChild(elem);
					var rel = elem.rel;
					if (elem.href && typeof rel != "string" || rel.length == 0 || rel.toLowerCase() == "stylesheet") {
						var url = elem.href.replace(/(&|\?)_cacheOverride=\d+/, '');
						elem.href = url + (url.indexOf('?') >= 0 ? '&' : '?') + '_cacheOverride=' + (new Date().valueOf());
					}
					parent.appendChild(elem);
				}
			}
			var protocol = window.location.protocol === 'http:' ? 'ws://' : 'wss://';
			var address = protocol + window.location.host + window.location.pathname + '/ws';
			var socket = new WebSocket(address);
			socket.onmessage = function (msg) {
				if (msg.data == 'reload') window.location.reload();
				else if (msg.data == 'refreshcss') refreshCSS();
			};
			if (sessionStorage && !sessionStorage.getItem('IsThisFirstTime_Log_From_LiveServer')) {
				console.log('Live reload enabled.');
				sessionStorage.setItem('IsThisFirstTime_Log_From_LiveServer', true);
			}
		})();
	}
	else {
		console.error('Upgrade your browser. This Browser is NOT supported WebSocket for Live-Reloading.');
	}
	// ]]>
</script>


</div>
    <script src="./Checkout_files/bootstrap.bundle(1).min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
    -->
    <script src="./Checkout_files/supabase-js@2"></script>

    <script>
       fetch("footer.html")
        .then((response) => response.text())
        .then((data) => {
          document.getElementById("footer-container").innerHTML = data;
        });
      const supabaseUrl = "https://xrslatldfiyfpszgmptb.supabase.co";
      const supabaseKey =
        "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inhyc2xhdGxkZml5ZnBzemdtcHRiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE1MDczMDEsImV4cCI6MjA4NzA4MzMwMX0.0MI2j1h3ruY3Nbdux0RyCHFHs7S8wbnWZO92AiUkD_E";

      const { createClient } = supabase;
      const db = createClient(supabaseUrl, supabaseKey);
      const checkoutForm = document.getElementById("#checkout-form");
      document
        .querySelector("#checkout-form")
        .addEventListener("submit", async (e) => {
          e.preventDefault();
          //////////////////////////username VALIDATION////////////////////////////////
          const usernameRegex = /^[a-zA-Z0-9]{4,}$/;
          const usernameInput = document.getElementById("username");

          if (!usernameRegex.test(usernameInput.value.trim())) {
            usernameInput.classList.add("is-invalid");
            usernameInput.nextElementSibling.textContent =
              "Username must be at least 4 characters and only letters/numbers";
            return; // stop form submission
          } else {
            usernameInput.classList.remove("is-invalid");
          }
          // Check if username already exists in the "orders" table
          const { data: existingUser, error: fetchError } = await db
            .from("orders")
            .select("username")
            .eq("username", usernameInput.value.trim())
            .limit(1);

          if (fetchError) {
            console.error(fetchError);
            alert("Error checking username. Try again later.");
            return;
          }

          if (existingUser.length > 0) {
            usernameInput.classList.add("is-invalid");
            usernameInput.nextElementSibling.textContent =
              "Username already taken. Please choose another.";
            return; // stop submission
          }

          ////////////////////Card VALIDATION//////////////////
          const ccNumberInput = document.getElementById("cc-number");

          ccNumberInput.addEventListener("input", function () {
            let value = this.value.replace(/\D/g, ""); // remove non-digits

            // limit to 16 digits only
            value = value.substring(0, 16);

            // add space every 4 digits
            value = value.replace(/(.{4})/g, "$1 ").trim();

            this.value = value;
          });

          const cvvInput = document.getElementById("cc-cvv");

          cvvInput.addEventListener("input", function () {
            let value = this.value.replace(/\D/g, ""); // remove non-digits
            this.value = value.substring(0, 3); // max 3 digits
          });

          const nameInput = document.getElementById("fullName");

          nameInput.addEventListener("input", function () {
            this.value = this.value.replace(/[^a-zA-Z\s]/g, "");
          });

          const expireInput = document.getElementById("cc-expire");

          expireInput.addEventListener("input", function () {
            let value = this.value.replace(/\D/g, ""); // digits only

            // limit to 4 digits (DDMM)
            value = value.substring(0, 4);

            // format as DD/MM
            if (value.length > 2) {
              value = value.substring(0, 2) + "/" + value.substring(2);
            }

            this.value = value;
          });

          const orderData = {
            first_name: document.getElementById("firstName").value,
            last_name: document.getElementById("lastName").value,
            username: document.getElementById("username").value,
            country: document.getElementById("country").value,
            state: document.getElementById("state").value,
            postcode: document.getElementById("Postcode").value,
            payment_method: document.querySelector(
              'input[name="paymentMethod"]:checked',
            ).id,
          };

          const { data, error } = await db.from("orders").insert(orderData);
          if (error) {
            console.error(error);
          } else {
            console.log(data);
            alert("Order placed successfully!");
            document.getElementById("checkout-form").reset();
          }
        });


        fetch("navbar.html")
.then(res=>res.text())
.then(html=>{
document.getElementById("navbar").innerHTML=html

})
    </script>
  <!-- Code injected by live-server -->
<script>
	// <![CDATA[  <-- For SVG support
	if ('WebSocket' in window) {
		(function () {
			function refreshCSS() {
				var sheets = [].slice.call(document.getElementsByTagName("link"));
				var head = document.getElementsByTagName("head")[0];
				for (var i = 0; i < sheets.length; ++i) {
					var elem = sheets[i];
					var parent = elem.parentElement || head;
					parent.removeChild(elem);
					var rel = elem.rel;
					if (elem.href && typeof rel != "string" || rel.length == 0 || rel.toLowerCase() == "stylesheet") {
						var url = elem.href.replace(/(&|\?)_cacheOverride=\d+/, '');
						elem.href = url + (url.indexOf('?') >= 0 ? '&' : '?') + '_cacheOverride=' + (new Date().valueOf());
					}
					parent.appendChild(elem);
				}
			}
			var protocol = window.location.protocol === 'http:' ? 'ws://' : 'wss://';
			var address = protocol + window.location.host + window.location.pathname + '/ws';
			var socket = new WebSocket(address);
			socket.onmessage = function (msg) {
				if (msg.data == 'reload') window.location.reload();
				else if (msg.data == 'refreshcss') refreshCSS();
			};
			if (sessionStorage && !sessionStorage.getItem('IsThisFirstTime_Log_From_LiveServer')) {
				console.log('Live reload enabled.');
				sessionStorage.setItem('IsThisFirstTime_Log_From_LiveServer', true);
			}
		})();
	}
	else {
		console.error('Upgrade your browser. This Browser is NOT supported WebSocket for Live-Reloading.');
	}
	// ]]>
</script>

</body></html>